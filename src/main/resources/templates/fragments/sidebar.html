<div th:fragment="sidebar"
	class="sidebar d-flex flex-column vh-100 bg-dark text-white">
	<!-- Header -->
	<div class="p-3 text-center border-bottom">
		<img src="/images/kr.png" alt="Logo" class="rounded mb-2"
			style="height: 80px; width: auto; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);">
		<h3 class="mt-2 fw-bold"
			style="font-family: 'Segoe UI', 'Helvetica Neue', sans-serif; font-size: 20px; color: #0d6efd; letter-spacing: 2px; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);">
			K R SYSTEM</h3>
	</div>

	<!-- Scrollable main navigation -->
	<div class="scroll-wrapper p-3">
		<ul class="nav nav-pills flex-column mb-auto">

			<!-- Home -->
			<li class="nav-item"><a href="/dashboard"
				class="nav-link text-white"> <i
					class="bi bi-house-door-fill me-2"></i> Home
			</a></li>

			<!-- Products -->
			<li class="nav-item"
				th:if="${session.userRole == 'admin' or session.userRole == 'staff'}">
				<a class="nav-link text-white" data-bs-toggle="collapse"
				href="#productsMenu" role="button" aria-expanded="false"
				aria-controls="productsMenu"> <i class="bi bi-box-seam me-2"></i>
					Products <i class="bi bi-caret-down-fill float-end"></i>
			</a>
				<div class="collapse ms-3" id="productsMenu">
					<ul class="nav flex-column">
						<li class="nav-item"><a href="/products"
							class="nav-link text-white"> <i class="bi bi-list-ul me-2"></i>
								All Products
						</a></li>
						<li class="nav-item"><a data-bs-toggle="modal"
							data-bs-target="#addProductModal" class="nav-link text-white">
								<i class="bi bi-plus-circle me-2"></i> Add Product
						</a></li>
					</ul>
				</div>
			</li>
			<!-- Category  -->
			
			<li class="nav-item"
				th:if="${session.userRole == 'admin' or session.userRole == 'staff'}">

				<a class="nav-link text-white" data-bs-toggle="collapse"
				href="#categoryMenu" role="button" aria-expanded="false"
				aria-controls="categoryMenu"> <i class="bi bi-tags me-2"></i>
					Category <i class="bi bi-caret-down-fill float-end"></i>
			</a>

				<div class="collapse ms-3" id="categoryMenu">
					<ul class="nav flex-column">

						<!-- All Categories -->
						<li class="nav-item"><a href="/categories"
							class="nav-link text-white"> <i class="bi bi-list-ul me-2"></i>
								All Categories
						</a></li>

						<!-- Add Category -->
						<li class="nav-item"><a data-bs-toggle="modal"
							data-bs-target="#addCategoryModal" class="nav-link text-white">
								<i class="bi bi-plus-circle me-2"></i> Add Category
						</a></li>

					</ul>
				</div>
			</li>

			<!-- Suppliers -->
			<li class="nav-item"
				th:if="${session.userRole == 'admin' or session.userRole == 'staff'}">
				<a class="nav-link text-white" data-bs-toggle="collapse"
				href="#suppliersMenu" role="button" aria-expanded="false"
				aria-controls="suppliersMenu"> <i class="bi bi-truck me-2"></i>
					Suppliers <i class="bi bi-caret-down-fill float-end"></i>
			</a>
				<div class="collapse ms-3" id="suppliersMenu">
					<ul class="nav flex-column">
						<li class="nav-item"><a href="/suppliers"
							class="nav-link text-white"> <i class="bi bi-list-ul me-2"></i>
								All Suppliers
						</a></li>
						<li class="nav-item"><a data-bs-toggle="modal"
							data-bs-target="#addSupplierModal" class="nav-link text-white">
								<i class="bi bi-person-plus me-2"></i> Add Supplier
						</a></li>
					</ul>
				</div>
			</li>

			<!-- Purchases -->
			<li class="nav-item"
				th:if="${session.userRole == 'admin' or session.userRole == 'staff'}">
				<a class="nav-link text-white" data-bs-toggle="collapse"
				href="#purchasesMenu" role="button" aria-expanded="false"
				aria-controls="purchasesMenu"> <i class="bi bi-cart-check me-2"></i>
					Purchases <i class="bi bi-caret-down-fill float-end"></i>
			</a>
				<div class="collapse ms-3" id="purchasesMenu">
					<ul class="nav flex-column">
						<li class="nav-item"><a href="/purchases"
							class="nav-link text-white"> <i class="bi bi-list-ul me-2"></i>
								All Purchases
						</a></li>
						<li class="nav-item"><a href="/purchase-summary"
							class="nav-link text-white"> <i class="bi bi-receipt me-2"></i>
								Purchase Details
						</a></li>
						<li class="nav-item"><a data-bs-toggle="modal"
							data-bs-target="#addPurchasesModal" class="nav-link text-white">
								<i class="bi bi-plus-circle me-2"></i> Add Purchase
						</a></li>
					</ul>
				</div>
			</li>

			<!-- Sales -->
			<li class="nav-item"
				th:if="${session.userRole == 'admin' or session.userRole == 'staff' or session.userRole == 'sale'}">
				<a class="nav-link text-white" data-bs-toggle="collapse"
				href="#salesMenu" role="button" aria-expanded="false"
				aria-controls="salesMenu"> <i class="bi bi-cash-stack me-2"></i>
					Sales <i class="bi bi-caret-down-fill float-end"></i>
			</a>
				<div class="collapse ms-3" id="salesMenu">
					<ul class="nav flex-column">
						<li class="nav-item"><a href="/sales"
							class="nav-link text-white"> <i class="bi bi-list-ul me-2"></i>
								All Sales
						</a></li>
						<li class="nav-item"><a href="/sales-summary"
							class="nav-link text-white"> <i
								class="bi bi-clipboard-data me-2"></i> Sales Details
						</a></li>
						<li class="nav-item"><a data-bs-toggle="modal"
							data-bs-target="#addSalesModal" class="nav-link text-white">
								<i class="bi bi-plus-circle me-2"></i> Add Sales
						</a></li>
					</ul>
				</div>
			</li>

			<!-- Users -->
			<li class="nav-item" th:if="${session.userRole == 'admin'}"><a
				class="nav-link text-white" data-bs-toggle="collapse"
				href="#usersMenu" role="button" aria-expanded="false"
				aria-controls="usersMenu"> <i
					class="bi bi-person-lines-fill me-2"></i> Users <i
					class="bi bi-caret-down-fill float-end"></i>
			</a>
				<div class="collapse ms-3" id="usersMenu">
					<ul class="nav flex-column">
						<li class="nav-item"><a href="/user"
							class="nav-link text-white"> <i
								class="bi bi-people-fill me-2"></i> All Users
						</a></li>

					</ul>

				</div></li>
		</ul>
	</div>

	<!-- Exit -->
	<div class="p-3">
		<button class="btn btn-danger w-100 text-white" data-bs-toggle="modal"
			data-bs-target="#exitModal">
			<i class="bi bi-box-arrow-right me-2"></i> Exit
		</button>
	</div>

	<!-- Logout Modal -->
	<div class="modal fade" id="exitModal" tabindex="-1"
		aria-labelledby="exitModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header" style="color: black;">
					<h5 class="modal-title d-flex align-items-center gap-2"
						id="exitModalLabel">
						<i class="bi bi-exclamation-triangle-fill text-warning"></i>
						Confirm Logout
					</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body text-center" style="color: black;">
					<i class="bi bi-box-arrow-right text-danger fs-3 mb-2"></i>
					<p class="mt-2 mb-0">Are you sure you want to log out?</p>
				</div>
				<div class="modal-footer d-flex justify-content-center gap-3">
					<a href="/logout" class="btn btn-danger text-white"> <i
						class="bi bi-door-closed me-2"></i> Logout
					</a>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Bootstrap JS -->
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
