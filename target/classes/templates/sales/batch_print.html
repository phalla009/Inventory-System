<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Batch Sales Receipts</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
<style>
body {
	font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
	background: #f8f9fa;
	color: #333;
}

@media print {
	body {
		background: white;
	}
	.no-print {
		display: none !important;
	}
	.receipt {
		page-break-after: always;
		border: 2px solid #333;
	}
	.receipt:last-child {
		page-break-after: avoid;
	}
}

.receipt {
	max-width: 800px;
	margin: 40px auto;
	padding: 30px;
	background: white;
	border: 2px solid #333;
	border-radius: 8px;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.header {
	text-align: center;
	margin-bottom: 30px;
	border-bottom: 3px double #333;
	padding-bottom: 15px;
}

.company-name {
	font-size: 28px;
	font-weight: bold;
	color: #2c3e50;
	margin-bottom: 5px;
}

.company-address {
	font-size: 14px;
	color: #555;
}

.receipt-title {
	font-size: 36px;
	font-weight: bold;
	color: #2c3e50;
	margin: 20px 0;
	text-transform: uppercase;
	letter-spacing: 2px;
}

.info-row {
	display: flex;
	justify-content: space-between;
	margin-bottom: 25px;
	font-size: 15px;
}

.info-left {
	width: 55%;
}

.info-right {
	width: 40%;
	text-align: right;
}

.table {
	margin-top: 20px;
	font-size: 15px;
}

.table th {
	background-color: #345b7a !important;
	color: white;
	font-weight: 600;
	text-align: center;
}

.table td {
	vertical-align: middle;
}

.total-section {
	margin-top: 20px;
	font-size: 16px;
}

.total-line {
	display: flex;
	justify-content: flex-end;
	padding: 6px 0;
}

.total-label {
	width: 200px;
	text-align: right;
	padding-right: 20px;
}

.total-amount {
	width: 150px;
	text-align: right;
	font-weight: bold;
}

.final-total {
	border-top: 2px solid #333;
	padding-top: 8px;
	font-size: 20px;
	background-color: #f0f8ff;
}

.notes {
	margin-top: 40px;
	font-style: italic;
	color: #555;
}

.text-end {
	text-align: right;
}
</style>
</head>
<body>

	<div class="container">

		<div th:each="sale : ${selectedSales}" class="receipt">

			<!-- Company Header -->
			<div class="header d-flex align-items-center">
				<!-- Logo -->
				<div class="company-logo me-3">
					<img th:src="@{/images/kr.png}" alt="KR STORE Logo"
						style="height: 70px;">
				</div>

				<!-- Company info -->
				<div class="company-info" style="margin-left: 150px;">
					<div class="company-name">KR STORE.</div>
					<div class="company-address">1234 Company St., Company Town,
						ST 12345</div>
				</div>
			</div>

			<h1 class="receipt-title">Receipt</h1>

			<!-- Customer & Receipt Info -->
			<div class="info-row">
				<div class="info-left">
					<strong>Billed To:</strong><br> <span>General</span>
					<!-- <span th:text="${sale.customer_name}">Customer Name</span> -->
				</div>
				<div class="info-right">
					<strong>Receipt #</strong> <span
						th:text="${'000000'.concat(sale.id)}">0000457</span><br> <strong>Receipt
						Date</strong> <span
						th:text="${#temporals.format(sale.sale_date, 'dd-MM-yyyy')}">11-04-2023</span>
				</div>
			</div>

			<!-- Items Table -->
			<table class="table table-bordered">
				<thead>
					<tr>
						<th style="width: 15%;">QTY</th>
						<th>Description</th>
						<th style="width: 18%;">Unit Price</th>
						<th style="width: 18%;">Amount</th>
					</tr>
				</thead>
				<tbody>
					<!-- Example rows - replace with th:each if you have line items -->
					<tr>
						<td th:text="${sale.quantity}" class="text-center">1.00</td>
						<td th:text="${sale.product != null ? sale.product.name : 'N/A'}">Replacement
							of spark plugs</td>
						<td th:text="${#numbers.formatDecimal(sale.subtotal, 1, 2)}"
							class="text-end">$40.00</td>
						<td
							th:text="${#numbers.formatDecimal(sale.quantity * sale.subtotal, 1, 2)}"
							class="text-end">$40.00</td>
					</tr>
				</tbody>
			</table>

			<!-- Totals -->

			<div class="total-section">
				<!-- Subtotal -->
				<div class="total-line">
					<div class="total-label">
						<strong>SubTotal:</strong>
					</div>
					<div class="total-amount"
						th:text="'$' + ${#numbers.formatDecimal(sale.subtotal, 1, 2)}">$230.00</div>
				</div>

				<!-- Sales Dis -->
				<div class="total-line">
					<div class="total-label">
						<strong>Discount (0%):</strong>
					</div>
					<div class="total-amount"
						th:text="'$' + ${#numbers.formatDecimal(sale.subtotal * 0 / 100, 1, 2)}">$0</div>
				</div>

				<!-- Total USD -->
				<div class="total-line final-total">
					<div class="total-label">
						<strong>Total (USD):</strong>
					</div>
					<div class="total-amount"
						th:text="'$' + ${#numbers.formatDecimal(sale.subtotal + (sale.subtotal * 0 / 100), 1, 2)}">$241.50</div>
				</div>
				<!-- Total KHR -->
				<div class="total-line final-total">
					<div class="total-label">
						<strong>Total (KHR):</strong>
					</div>
					<div class="total-amount"
						th:text="${#numbers.formatDecimal((sale.subtotal + (sale.subtotal * 0 / 100)) * 4000, 0, 0)} + '៛'">964000៛</div>
				</div>
			</div>

			<div class="notes mt-5">
				<strong>Notes</strong><br> Thanks you!
			</div>
		</div>
		<button class="btn btn-primary mb-4 no-print" onclick="window.print()">
			Print Receipt</button>
	</div>

</body>
</html>